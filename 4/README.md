# 4
- 画像をリアルタイムで変換（圧縮とリサイズ、webp化、avif化）するためのlambda@edge。
- 元サイズの横幅、高さを超えるファイルを作らないように、横幅、高さの情報をファイル名を通して確認する。(`m{id}s{width}x{height}z.(jpg|png)`)
- 作成した画像は`/dist/...`に保存し、次回以降はそれを参照する。
- `/dist/...`に保存した画像は、数ヶ月で削除する。またアクセスがあれば、作成する。

## 概要
- suffixに`-w600a11`を付けると、横幅600px、アスペクト比1:1の画像を作成する。(`m12s600x450z-w600a11.jpg`)
- suffixに`.webp`を付けると、webpを作成する。(`m12s600x450z-w600a11.jpg.webp`)
- 元画像より大きいサイズは作成しない。例えば、`600x450`のファイルに対して、`w1200a11`でアクセスした場合、`w600a11`にリダイレクトする。
- avifはリアルタイムで変換するのは不可能なので、`/avif/...`に保存し、それをトリガーにして、`5`で作成する。
- avifがまだ存在しない場合は、webpにリダイレクトする。
